# çŠ¶æ€æ å°ç»„ä»¶é€‰æ‹©åŠŸèƒ½è®¾è®¡

## æ¦‚è¿°

å°†åŸæœ‰çš„ä¸‹æ‹‰æ¡†ç­›é€‰æ¨¡å¼ï¼ˆdisplayStyle: remaining/percentage/bothï¼‰æ”¹ä¸ºäº”ç§å¯ç‹¬ç«‹é€‰æ‹©çš„å°ç»„ä»¶ï¼Œç”¨æˆ·å¯è‡ªç”±ç»„åˆæ­é…æ˜¾ç¤ºå†…å®¹ã€‚

## âœ… å®ç°çŠ¶æ€

**å·²å®Œæˆå®ç°** - ä»£ç å·²æ›´æ–°ï¼ŒåŒç«¯å‡æ”¯æŒæ–°çš„äº”ç»„ä»¶æ¨¡å¼ã€‚

---

## æ–°è®¾è®¡

### äº”ç§å°ç»„ä»¶

| ç»„ä»¶ | é…ç½®é”® | æ˜¾ç¤ºå†…å®¹ | ç¤ºä¾‹ | é»˜è®¤å€¼ |
|------|--------|----------|------|--------|
| çŠ¶æ€å›¾æ ‡ | `statusIcon` | æ ¹æ®å‰©ä½™æ¯”ä¾‹æ˜¾ç¤ºé¢œè‰²å›¾æ ‡ | ğŸŸ¢ / ğŸŸ¡ / ğŸ”´ | âœ… å¯ç”¨ |
| çŠ¶æ€æ¯”ä¾‹ | `percentage` | å·²ç”¨ç™¾åˆ†æ¯” | 45.2% | âœ… å¯ç”¨ |
| å·²ä½¿ç”¨ | `used` | å·²ç”¨é‡‘é¢ | $12.50 | âŒ ç¦ç”¨ |
| æ€»é‡‘é¢ | `total` | æ€»é¢åº¦ | $50.00 | âŒ ç¦ç”¨ |
| æµ‹é€Ÿ | `latency` | æœ€ä½å»¶è¿Ÿ | 128ms | âœ… å¯ç”¨ |

### çŠ¶æ€å›¾æ ‡é¢œè‰²è§„åˆ™

| å‰©ä½™æ¯”ä¾‹ | é¢œè‰² | å›¾æ ‡ |
|----------|------|------|
| > 60% | ç»¿è‰² | ğŸŸ¢ |
| 20% ~ 60% | é»„è‰² | ğŸŸ¡ |
| < 20% | çº¢è‰² | ğŸ”´ |

---

## é…ç½®å®šä¹‰

### VS Code (`package.json`)

```json
{
  "quota-bar.widgets.statusIcon": { "type": "boolean", "default": true },
  "quota-bar.widgets.percentage": { "type": "boolean", "default": true },
  "quota-bar.widgets.used": { "type": "boolean", "default": false },
  "quota-bar.widgets.total": { "type": "boolean", "default": false },
  "quota-bar.widgets.latency": { "type": "boolean", "default": true }
}
```

### IDEA (`QuotaSettings.kt`)

```kotlin
data class State(
    var widgetStatusIcon: Boolean = true,
    var widgetPercentage: Boolean = true,
    var widgetUsed: Boolean = false,
    var widgetTotal: Boolean = false,
    var widgetLatency: Boolean = true,
    // ...
)
```

---

## æ˜¾ç¤ºæ ¼å¼

çŠ¶æ€æ æ–‡æœ¬æŒ‰å¯ç”¨çš„ç»„ä»¶é¡ºåºæ‹¼æ¥ï¼Œç»„ä»¶é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼š

```
[çŠ¶æ€å›¾æ ‡] [çŠ¶æ€æ¯”ä¾‹] [å·²ä½¿ç”¨] [æ€»é‡‘é¢] [æµ‹é€Ÿ]
```

ç¤ºä¾‹ï¼š
- å…¨éƒ¨å¯ç”¨: `ğŸŸ¢ 45.2% $12.50 $50.00 128ms`
- é»˜è®¤é…ç½®: `ğŸŸ¢ 45.2% 128ms`
- ä»…é‡‘é¢: `$12.50 $50.00`

---

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ï¼šåŒç«¯ä»æ˜¾ç¤ºæ—§çš„"æ˜¾ç¤ºæ ·å¼"ä¸‹æ‹‰æ¡†

**åŸå› **ï¼šè¿è¡Œçš„æ˜¯æ—§ç‰ˆæœ¬çš„æ’ä»¶ï¼ŒæœªåŠ è½½æœ€æ–°ä»£ç ã€‚

#### VS Code è§£å†³æ–¹æ¡ˆ

1. **é‡æ–°ç¼–è¯‘æ‰©å±•**ï¼š
   ```bash
   cd vscode-extension
   npm run compile
   ```

2. **é‡å¯æ‰©å±•å¼€å‘å®¿ä¸»**ï¼ˆå¦‚æœåœ¨å¼€å‘æ¨¡å¼ï¼‰ï¼š
   - æŒ‰ `F5` é‡æ–°å¯åŠ¨è°ƒè¯•
   - æˆ–æŒ‰ `Cmd+Shift+P` â†’ "Developer: Reload Window"

3. **æ¸…ç†æ—§é…ç½®**ï¼ˆå¦‚æœ‰æ®‹ç•™ï¼‰ï¼š
   - æ‰“å¼€ `settings.json`ï¼Œåˆ é™¤ `"quota-bar.displayStyle"` å­—æ®µ

#### IDEA è§£å†³æ–¹æ¡ˆ

1. **é‡æ–°æ„å»ºæ’ä»¶**ï¼š
   ```bash
   cd idea-plugin
   ./gradlew clean buildPlugin
   ```

2. **é‡æ–°å®‰è£…æ’ä»¶**ï¼š
   - `Settings â†’ Plugins â†’ âš™ï¸ â†’ Install Plugin from Disk...`
   - é€‰æ‹© `build/distributions/*.zip`

3. **é‡å¯ IDE**

4. **æ¸…ç†æ—§é…ç½®**ï¼ˆå¦‚æœ‰æ®‹ç•™ï¼‰ï¼š
   - åˆ é™¤ `~/Library/Application Support/JetBrains/<IDEç‰ˆæœ¬>/options/ApiQuotaWatcher.xml`

---

## å·²ä¿®æ”¹æ–‡ä»¶æ¸…å•

### VS Code æ‰©å±•

| æ–‡ä»¶ | çŠ¶æ€ | ä¿®æ”¹å†…å®¹ |
|------|------|----------|
| `src/types.ts` | âœ… | æ·»åŠ  `WidgetConfig` ç±»å‹ |
| `src/statusBar.ts` | âœ… | ä½¿ç”¨ `widgets.*` æ§åˆ¶æ˜¾ç¤º |
| `src/configService.ts` | âœ… | è¯»å– `widgets.*` é…ç½® |
| `package.json` | âœ… | å®šä¹‰ `widgets.*` é…ç½®é¡¹ |

### IDEA æ’ä»¶

| æ–‡ä»¶ | çŠ¶æ€ | ä¿®æ”¹å†…å®¹ |
|------|------|----------|
| `QuotaSettings.kt` | âœ… | æ·»åŠ  `widgetXxx` å­—æ®µ |
| `QuotaSettingsConfigurable.kt` | âœ… | æ·»åŠ å¤é€‰æ¡† UI |
| `QuotaStatusBarWidget.kt` | âœ… | ä½¿ç”¨è®¾ç½®æ§åˆ¶æ˜¾ç¤º |

---

## è®¾ç½®ç•Œé¢é¢„è§ˆ

### VS Code

åœ¨è®¾ç½®ä¸­æœç´¢ `quota-bar`ï¼Œ"åŸºç¡€è®¾ç½®" åˆ†ç»„ä¸‹å¯è§ï¼š

```
â˜‘ æ˜¾ç¤ºçŠ¶æ€å›¾æ ‡ï¼ˆç»¿/é»„/çº¢ï¼‰
â˜‘ æ˜¾ç¤ºå·²ç”¨ç™¾åˆ†æ¯”
â˜ æ˜¾ç¤ºå·²ä½¿ç”¨é‡‘é¢
â˜ æ˜¾ç¤ºæ€»é‡‘é¢
â˜‘ æ˜¾ç¤ºæµ‹é€Ÿå»¶è¿Ÿ
```

### IDEA

`Settings â†’ Tools â†’ Quota Bar`ï¼š

```
æ˜¾ç¤ºç»„ä»¶
  â˜‘ çŠ¶æ€å›¾æ ‡ï¼ˆç»¿/é»„/çº¢ï¼‰
  â˜‘ å·²ç”¨ç™¾åˆ†æ¯”
  â˜ å·²ä½¿ç”¨é‡‘é¢
  â˜ æ€»é‡‘é¢
  â˜‘ æµ‹é€Ÿå»¶è¿Ÿ
```
